var bundleProductDisplayAction={productState:{available:!0,soldOut:"",onSale:"",showUnitPrice:"",productId:"",product_handle:""},_hideErrorMessage:function(){},_setProductState:function(t){var e=t.detail.variant;if(this.productState.productId=t.detail.product.id,this.productState.product_handle=t.detail.product.handle,!e)return this.productState.available=!1,void 0;this.productState.available=!0,this.productState.soldOut=!e.available,this.productState.onSale=e.compare_at_price>e.price,this.productState.showUnitPrice=!!e.unit_price},_updateStoreAvailabilityContent:function(t){},_updateAddToCart:function(t){return this.productState.available?this.productState.soldOut?(this._disableAddToCart(DT_THEME.strings.soldOut),jQuery("#bundle_chk_"+this.productState.productId).prop("checked",!1),this._updatePriceValueHidden(t),void 0):(this._enableAddToCart(DT_THEME.strings.addToCart),jQuery("#bundle_chk_"+this.productState.productId).prop("checked",!0),this._updatePriceValueHidden(t),void 0):(this._disableAddToCart(DT_THEME.strings.unavailable),jQuery("#bundle_chk_"+this.productState.productId).prop("checked",!1),this._updatePriceValueHidden(t),void 0)},_updatePriceValueHidden:function(t){var e=t.detail.variant;if(e){var d=e.price;var a=e.id}else{var d="";var a=""}jQuery("#bundle_product_price_"+this.productState.productId).val(d),jQuery("#bundle_product_price_"+this.productState.productId).attr("data-varient-id",a),jQuery("#bundle_chk_"+this.productState.productId).focus(),computeTotalDiscount()},_disableAddToCart:function(t){jQuery(".dt_AddToCart").html(t),jQuery(".dt_AddToCart").prop("disabled",!0)},_enableAddToCart:function(t){jQuery(".dt_AddToCart").prop("disabled",!1),jQuery(".dt_AddToCart").html(t)},_updateLiveRegion:function(t){},_updatePriceComponentStyles:function(t){},_updateAvailability:function(t){bundleProductDisplayAction._hideErrorMessage(),bundleProductDisplayAction._setProductState(t),bundleProductDisplayAction._updateStoreAvailabilityContent(t),bundleProductDisplayAction._updateAddToCart(t),bundleProductDisplayAction._updateLiveRegion(t),bundleProductDisplayAction._updatePriceComponentStyles(t)},_updateMedia:function(t){var e;var d=t.detail.variant.featured_media.id;var a="product-thumb-media"+"-"+d;var r=a;var i="product-gallery-media"+"-"+d;bundleProductDisplayAction._switchMedia(i),bundleProductDisplayAction._setActiveThumbnail(a)},_switchMedia:function(t){},_setActiveThumbnail:function(t){},_updatePrice:function(t){var e=t.detail.variant;var d=t.detail.product.id;document.querySelector("#sale-price-"+d)&&(document.querySelector("#sale-price-"+d).innerHTML=theme.Currency.formatMoney(e.price,theme.moneyFormat)),document.querySelector("#old-price-"+d)&&(document.querySelector("#old-price-"+d).innerHTML=theme.Currency.formatMoney(e.compare_at_price,theme.moneyFormat))},_updateSKU:function(t){var e=t.detail.variant;var d=document.querySelector(".dT_ProductSkuText");d&&(d.innerHTML=e.sku)}};var computeTotalDiscount=function(){var t=[];var e=DT_DISCOUNT;var d=!0;var a=0;bundleProductIds.forEach((a=>{var r=a;if(jQuery("#bundle_chk_"+r).is(":checked")){var i=jQuery("#bundle_product_price_"+r).val();""!=i?(i*=1,t.push(i)):d=!1}else d=!1;var n=t.reduce(((t,e)=>t+e),0);0==d?jQuery(".dT_totalBundleOriginalPrice").hide():(jQuery(".dT_totalBundleOriginalPrice").html(theme.Currency.formatMoney(n,theme.moneyFormat)),jQuery(".dT_totalBundleOriginalPrice").show()),1==d&&(n-=n*((e=parseInt(e))/100)),jQuery(".dT_totalBundleSalePrice").html(theme.Currency.formatMoney(n,theme.moneyFormat))}))};class doBundleProductSwatch{constructor(t,e,d,a){this.eventHandlers={};var r=$("#"+e).html();var i=JSON.parse(r);this.container=t,this.productId=i.id;var n=i;this.variants=new dT_slate.Variants({container:t,product:n,originalSelectorId:d,enableHistoryState:!1,singleOptionSelector:".single-option-selector"}),this.eventHandlers.updateAvailability=bundleProductDisplayAction._updateAvailability.bind(this),this.eventHandlers.updateMedia=bundleProductDisplayAction._updateMedia.bind(this),this.eventHandlers.updatePrice=bundleProductDisplayAction._updatePrice.bind(this),this.eventHandlers.updateSKU=bundleProductDisplayAction._updateSKU.bind(this),this.container.addEventListener("variantChange",this.eventHandlers.updateAvailability),this.container.addEventListener("variantImageChange",this.eventHandlers.updateMedia),this.container.addEventListener("variantPriceChange",this.eventHandlers.updatePrice),this.container.addEventListener("variantSKUChange",this.eventHandlers.updateSKU)}}!function(t){"use strict";var e=function(){jQuery(".dT_varientBWrap").is(":visible")&&jQuery(".dT_varientBWrap").slideUp()};t(document).on("click",(function(d){0===t(d.target).closest(".dT_bundleSelector").length&&e()})),document.querySelector(".dT_bundleOptions"),document.querySelector(".dT_bundleSelector")&&(t(document).on("click",".dT_bundleProductToggle",(function(t){t.preventDefault();var d=jQuery(this);var a=d.attr("data-bundle-product-handle");var r=d.attr("data-bundle-product-id");e(),jQuery(".dT_varientOptions_"+r).is(":visible")?jQuery(".dT_varientOptions_"+r).slideUp():jQuery(".dT_varientOptions_"+r).slideDown()})),t(document).on("change",".dT_bundleCheck",(function(t){t.preventDefault();var e=jQuery(this);var d=e.attr("data-product-handle");var a=e.attr("data-product-id");computeTotalDiscount()})),bundleProductIds.forEach((t=>{var e=t;new doBundleProductSwatch(document.getElementById("dT_bundle-product-"+e),"dT_BundleProductJson-"+e,"#bundle_productSelect_"+e,".single-option-selector")})),computeTotalDiscount())}(jQuery);
//# sourceMappingURL=/s/files/1/0108/7370/0415/t/9/assets/dT_bundle.js.map?v=7765072517030432429
